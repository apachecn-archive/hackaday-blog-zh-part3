# 智能手机台式乐器应用:失望还是高兴？

> 原文:[https://hack aday . com/2016/11/17/instrument-apps-on-your-phone-the-Christmas-cracker-novelties-of-the-test-bench/](https://hackaday.com/2016/11/17/instrument-apps-on-your-phone-the-christmas-cracker-novelties-of-the-test-bench/)

如果你对电子或工程感兴趣，你会注意到许多听起来有用的应用程序来帮助你的设计和建造工作。有计算器、设计辅助工具，还有一些有趣的应用程序，声称可以在你的手机上提供完整的工具。其中一些是为了支持外部第三方 USB 仪器外设而生产的，但大多数都声称只使用手机内的硬件来提供功能。既然可以免费下载，为什么还要购买昂贵的示波器、频谱分析仪或信号发生器呢？

那些在有英国传统的地方庆祝圣诞节的人对圣诞饼干和它们所包含的令人失望的新奇事物很熟悉。在这一点上，非英国人无疑是迷路了……有问题的饼干是一个用闪亮的纸包裹的硬纸板管，两端拉紧。这个想法是，两个人拉纸的两端，当它分开时，就会掉下一个玩具或新奇的东西。这有点像饼干盒里的奖品。

面向工程的应用程序遵循这种希望和失望的循环。但偶尔也有例外。让我们一起参观一些好的和坏的，好吗？

### 弱点

[![There is a lot of test equipment you can download, but are they any good?](../Images/1f657364da3f69df19410a334582d762.png)](https://hackaday.com/wp-content/uploads/2016/11/sig-gen-search.jpg)

There is a lot of test equipment you can download, but are they any good?

当然没那么简单。现代电话拥有强大的处理能力，但当涉及到模拟输入和输出时，它们仅限于打电话所需的硬件。一个麦克风输入和一个立体声输出，可以驱动放大器或一组耳机上的线路输入。除非你花了很多钱买了一部面向发烧友的非常高端的手机，否则这些手机不会采用特别高端的芯片，ADC 和 DAC 的最高采样速率将略高于 44.1kHz 的 CD 采样速率，不会有最安静的噪声性能。它们不会以任何方式进行校准，因此就测量能力而言，您可以从硬件中获得的最佳结果是带宽略高于 20KHz，但无法产生或测量可量化的电压。举个例子，即使是一个 5 美元的 USB 声卡，其带宽也比你的手机要高。

我们在本文前面提出的问题变成了“为什么要购买昂贵的示波器、频谱分析仪或信号发生器，因为您可以简单地免费下载一个只有 20KHz 带宽、无法精确测量或产生已知电压的示波器、频谱分析仪或信号发生器？”听起来不太令人鼓舞，是吗？

但是换个角度看，你不能和免费争论。如果你在音频上工作，那么也许他们能提供一些有用的东西。即使有其局限性，也许仍然有一些领域他们可以提供有用的见解，这就是我们现在要研究的。

### 优势

我们已经看到了手机作为工具平台的缺点，但它有什么优点吗？在这方面，我们是幸运的。手机可能无法精确测量电压，但在频率和时间方面应该可以做到。它的微处理器的所有动作都将由一个晶体振荡器控制，虽然它不会被校准到一个令人难以置信的标准，但对于一个免费的移动电话仪器来说仍然足够好。

即使我们不能完全相信我们的手机在振幅的问题上，我们可以在这个领域这样做，如果它返回一个频率或周期读数，我们可以相信它。我们可以信任手机的另一个领域是波形生成。在其 DAC 的限制范围内，我们知道它旨在再现一段音乐可以提供的任何波形，因此对于一个非常简单的音频台式仪器，我们可以相信它可以产生基本信号发生器所期望的正弦波、方波和三角波。

考虑了手机应用工具的可能用途，并因此对预期有了一个概念，是时候拿着手机坐下来真正尝试几个了。这不是对应用程序本身的回顾，而是对应用程序作为一种工具的可行性的审视，因此我们将提到几个应用程序，但不会详细回顾它们各自的功能。我们进行这些测试的设备是一台运行 Android 6.0.1 的 Moto G4。

### 信号发生器

[![The Keuwlsoft function generator.](../Images/7bce93a133fa0bbdd1ff898ead57052b.png)](https://hackaday.com/wp-content/uploads/2016/11/keuwlsoft-func-gen.jpg)

The Keuwlsoft function generator.

我们从观察手机作为信号发生器的性能开始。在“信号发生器”或“函数发生器”上搜索会有很多结果，其中靠近顶部的一个是 keuwlsoft 的产品，能够产生从 22kHz 到听起来不太可能的 471.16mHz 的正弦波、三角波和方波，以及一系列噪声源和调制效果。

它安装在手机上，在通常破译它的用户界面后，它会在扬声器中给我们一个音调。将一个 3.5 毫米的插孔和一根导线插入我们的示波器，我们可以看到预期的三种波形。测量的频率与应用程序中的数字完全一致。在 20KHz 以上的频率范围的上限，波形变得明显减弱和失真，但这可能是 Moto 音频硬件的一个特征。否则振幅在整个音频范围内保持相当稳定。

关于振幅，这些应用程序通常以它们所能提供的最大振幅的百分比进行校准，没有电压读数。然而，为了给出输出电平的概念，当应用内增益和器件音量都设置为最大时，我们测得 1KHz 正弦波的均方根值为 945mV。知道这个数字后，很容易将应用内增益设置为一个计算的百分比，以给出一个较低的数字，例如，为了实现 500mV RMS 读数，我们将其设置为 52.91%。无论如何，它都不是完美的，但是如果你在最大音量下测量了输出，就有可能进行某种程度的校准。

锻炼了手机产生波形的能力后，是时候考虑它测量波形的能力了。有许多可免费下载的应用程序，提供示波器、频谱分析仪或两种功能的组合。

### 输入问题

[![If you're very lucky, your app might have an input selection screen.](../Images/a6e2ad39ea8be890ca72f06d19fb2efd.png)](https://hackaday.com/wp-content/uploads/2016/11/input-selection-screen.jpg)

If you’re very lucky, your app might have an input selection screen.

安装这些应用时，我们首先遇到的是 Android 处理音频硬件的方式。默认情况下，这些应用程序从麦克风获取输入。每个安装它们的人可能会花一段时间对着手机吹口哨，以看到一个漂亮的波形或频谱峰值出现，但遗憾的是，对于我们的目的来说，麦克风没有用。我们需要一个物理输入，你可能认为这可以通过设备的 3.5 毫米插头上的麦克风输入来实现。不幸的是，现代电话与老式的卡式录音机不一样，所以我们很快发现，简单地插上合适的 [TRRS 引线](https://en.wikipedia.org/wiki/Phone_connector_(audio)#TRRS_standards)并不能神奇地从麦克风上切换过来。

相反，这种转换是由软件来处理的，它是否适合你将取决于你在手机、操作系统版本和应用程序的组合中有多幸运。我们没有发现任何应用程序能够识别默认插入 Moto 插孔的音频源，尽管有几个频谱分析仪应用程序在内置麦克风和线路输入之间的设置中提供了一个源选择选项。

[![A cheap USB sound card as an Android audio input.](../Images/5218c5afb927c53c87b8b04684df7e61.png)](https://hackaday.com/wp-content/uploads/2016/11/moto-with-soundcard.jpg)

A cheap USB sound card as an Android audio input.

令人高兴的是，如果你的手机是相当新的，有一个替代方案，不应该花费太多。从版本 5 开始，Android 就支持 USB 声卡，所以如果你有一根 OTG 线，你可以插上一根，重启手机，找到默认的音频输入和输出，现在是通过声卡。为了测试示波器应用程序，我们用 Moto 和一个便宜的非品牌 USB 音频加密狗进行了测试，它的性能非常可靠。重要的是重启手机时要插上电源，我们发现重启后插上电源并不总是能被识别。同样值得注意的是，尽管我们的 USB 卡能够提供超过 CD 质量的采样速率，但没有任何软件支持这些。

无论你通过哪种方式将工作信息输入到手机，还有一点需要注意。移动电话输入设计为仅与耳机麦克风一起使用来拨打电话，因此它需要麦克风电平信号。它将在远低于 100 毫伏的某个地方达到顶点，任何高于这个值的东西(如线路电平音频)都会使它失真。此外，它不具备任何类似真实示波器输入的弹性，因此除非您仅测量高达约 50mV 的电流，否则您必须构建某种形式的保护电路。看看[这个前置放大器项目](http://www.instructables.com/id/A-Preamplifier-for-Smartphone-Oscilloscopes/)举个例子。为了我们的测试目的，当使用 Moto 的输入插孔时，我们将信号发生器的音量调到适合输入的水平。

### 光谱分析仪

[![The Vuche Labs spectrum analyzer when fed with a 1kHz square wave.](../Images/46553fc2721444eb1fb9c6898c3a505b.png)](https://hackaday.com/wp-content/uploads/2016/11/vuche-labs-spectrum-analyzer.jpg)

The Vuche Labs spectrum analyzer when fed with a 1kHz square wave.

现在已经解决了让信号进入我们手机的先决条件，是时候看看一些应用程序来使用它了。从频谱分析仪开始，我们发现 Vuche labs 的[高级频谱分析仪](https://play.google.com/store/apps/details?id=com.vuche.asap)能够选择 Moto 的 3.5 毫米插孔作为输入，并提供了一个易于工作的界面。当呈现正弦波时，它会产生一个单峰，当改变为方波时，它会显示谐波含量，如你所料。它始终将基频识别为低几 Hz，例如，将验证的 1KHz 显示为 990Hz。

在 Y 轴上，它返回一个以 dB 为单位的数字。一如既往，问题是“dB 相对于*什么*？”，这里的答案似乎是相对于器件可量化的最大水平。因此，如果您有时间用上述已知仪器进行校准，并进行一些计算，您就可以得到一个真实的数字，然而，在大多数情况下，这种标度最多只能被视为峰值相对量化的指示。

### 示波器

在查看示波器应用程序时，我们几乎尝试了谷歌 Play 商店能为我们找到的每一个应用程序，没有一个能够选择 Moto 的 3.5 毫米插孔。这并不是说它们都不支持其他手机和操作系统的组合，只是说它们都不适合我们。因此，在测试这些应用程序时，我们不得不求助于上面提到的 USB 声卡，这有点不方便，但一部分应用程序识别起来没有问题。

[![LabNation's SmartScope showing a 1kHz sine wave.](../Images/6cfcb9e58676f8273df2ac40b4ffa3d8.png)](https://hackaday.com/wp-content/uploads/2016/11/smartscope-oscilloscope-sine.jpg)

LabNation’s SmartScope showing a 1kHz sine wave.

【LabNation 的 SmartScope 示波器是其示波器外设的配套应用程序，提供了您期望从“适当的”示波器获得的功能，但它也有一个支持手机音频输入的模式。我们喜欢它，因为不像许多其他的示波器应用程序，它有一个用户界面，允许轻松的缩放选择时基周期和电压。在时域中，使用该应用程序测量周期非常容易，但幅度域与其他应用程序一样，在不使用外设时不可信，需要根据已知仪器进行校准。不过，它确实能像传统示波器一样处理不同的波形，并提供了一种查看音频波形形状的便捷方式。

### 饼干还是长凳？我们的结论

那么，在工作台安装和试用测试设备应用程序几个小时后，我们会怎么想？令人印象深刻的是，仅仅使用手机硬件，这些应用程序中没有一个能够取代真正的乐器。有了专用外设，他们很有可能提供一台好的仪器，但这超出了本文的范围。

也就是说，这些应用程序提供了有用的功能吗，值得把它们保存在你的手机上吗？我们会说是的，因为不是很好的工具总比没有工具好，但我们想通过单独查看每个案例来证明这一点。

信号发生器，至少在音频范围内，是应用程序可以胜任的工作。如果您的电压要求仅延伸到音频线路电平及以下，并且您不想冒险超过 20kHz，它们是一个有用的音频源，能够提供各种波形组合。绝对有用。

**频谱分析仪**虽然不是手机性能和信号生成一样好的领域。这些应用程序在频域中很好，因此只要您保持在输入的电压范围内，您就可以使用它们来了解存在哪些频率，但是缺乏强度校准是一个致命的弱点。最好把这些看作是半有用半新奇的东西。

可悲的是，示波器应用程序更接近圣诞爆竹。是的，你可以看到波形的形状和周期，但是从这些读数中只能收集到一定量的信息。在我们看来，示波器最有用的功能是作为一个精确的时域电压表，如果没有这一功能，应用程序的用处就会大大降低。四分之三-新奇，四分之一-有用。

这些应用程序可以改进吗？如果他们的开发人员花时间整合输入选择，以确保所有用户都可以强迫他们听麦克风插孔，那肯定是这样。不幸的是，在不购买额外外设的情况下，电压域校准这一最有用的功能可能超出了手机硬件的能力，而这恰恰违背了目标。

毕竟，这些应用程序的一个优点是它们不需要任何成本，这比你买一个圣诞饼干还贵。有没有有用的乐器 app 建议？请在下面的评论中告诉我们。