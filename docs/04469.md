# 克里斯·康伦:设备安全 101

> 原文:[https://hack aday . com/2016/12/14/Chris-con lon-device-security-101/](https://hackaday.com/2016/12/14/chris-conlon-device-security-101/)

我们都为安全(或缺乏安全)而苦恼。)的智能设备。如果你的家庭网络没有被你的烤面包机或小摄像机侵入，你就错过了这个时代的潮流。但事情并不一定是这样的——智能设备*可以*在设计时考虑到安全性，而[克里斯·康伦](https://twitter.com/c_conlon)来到帕萨迪纳给我们做了一个关于基础知识的演讲。

他从数据安全的三个广义概念领域开始演讲:传输中的数据、设备上的静态数据以及固件及其更新方式。所有这些背后的一个共同线索是密码学，他在演讲的最后一部分将致力于解决这个问题。因此，如果您想快速了解设备安全，请继续观看！

 [https://www.youtube.com/embed/_HAVqlrSYYw?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent](https://www.youtube.com/embed/_HAVqlrSYYw?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent)

T2】

## 传输中的数据

您的智能设备可能会使用互联网来获得某种服务。您的数据在网络中传输时很容易受到攻击。您可能希望在整个过程中保持它的私有性和不可修改性，并确保它到达正确的目的地。这里，您基本上有两种选择:要么在会话层实现 TLS/SSL，要么在网络层用 IPSec 保护您的连接。

[![handshake](../Images/0cb4d4ff600df4a6975855c6669aca9c.png)](https://hackaday.com/wp-content/uploads/2016/12/handshake.png) 你可能听说过 TLS/SSL。当你在浏览器中输入`https://`时，它能保证你网上冲浪的安全。TLS(传输层安全性)实际上由四个部分组成。一个负责初始连接——握手——客户端和服务器就连接使用的加密算法达成一致。这就是身份验证发生的地方:您的客户端确信服务器是您认为的那个人，而这取决于 X.509 证书链。一旦设置了加密，你的数据就不会被修改。这一切似乎都可以在你笔记本电脑的浏览器中轻松实现。

但是从嵌入式设备的角度来看，TLS 是困难的。它涉及到加密算法，会加重微处理器 CPU 的负担，占用太多内存，通常会让你的设备陷入瘫痪。为了有所帮助，你可以选择一种使用较少 RAM 或 ROM 的加密算法，这取决于你缺少什么。你可以购买内置硬件加密外设的设备来减轻 CPU 的工作。如果你正在考虑运行一个 RTOS，在你深入你的项目之前寻找 TLS 支持。

## 静态数据

[![image17](../Images/0e900a8c7195a78b5082b9587cadb37a.png)](https://hackaday.com/wp-content/uploads/2016/12/image17.jpg) 存储在设备上的数据本身也容易受到攻击。如果里面有敏感信息，至少应该加密，如果可以完全不存储信息，那就完全避免了这个问题。假设您的固件使用加密，保持加密密钥的秘密是一个重要的问题。在设备上本地生成密钥可以防止它们在传输过程中被窥探。[Chris]另外建议不要为了不同的目的重复使用密钥，并经常更换它们。

但是设备是如何存储密钥的呢？理想情况下，你的芯片有一个安全的存储元件:一个可以存储密钥的 [TPM](https://en.wikipedia.org/wiki/Trusted_Platform_Module) 或 [HSM](https://en.wikipedia.org/wiki/Hardware_security_module) 。如果您没有任何安全存储，您可以随时要求用户采取一些措施来解密密钥，或者在检测到篡改的情况下将它们清零。

## 固件升级

如果你读过我们关于设备黑客的报道，你就会知道固件升级程序充满了恶作剧的机会。您的设备需要能够远程更新，但也需要能够信任固件的来源，需要在传输过程中加密，并且需要确保新固件完好无损地到达。

[Chris]的方法严重依赖公钥加密来完成这项工作。只要设备支持 TLS，它就可以在中间使用任何传输机制。[Chris]建议可以使用由 TLS 保护的 MQTT 来处理固件的分发。

## 密码系统

如果你一直在关注的话，你会注意到以上所有这些都很大程度上依赖于保密，这意味着要努力思考底层的加密技术。而且加密很大程度上依赖于随机数，这在小型确定性硬件设备上并不容易。

[![keysizes](../Images/a94d58e950e497e9e0efe6efe5d78ff6.png)](https://hackaday.com/wp-content/uploads/2016/12/keysizes.png) 你可能认为事物是随机的，但事实并非如此，包括时钟和序列号。你真正想要的是一个真正的随机数生成器——从环境中获得随机性的东西。如果你的设备没有足够的熵进入，你可以用你得到的任何熵定期播种一个伪随机数发生器，并希望这足够好。如今，许多设备都在芯片中内置了硬件随机数发生器，可以解决这个问题。

接下来，您需要确保使用足够长的密钥进行加密，这取决于您使用的算法和密钥中的实际位数。算法的选择受其速度和内存要求以及微控制器资源的影响。例如，如果你使用的芯片有一个专用的 SHA-2 硬件外设，你可能会想使用它，然后你可以相应地选择合适的密钥长度。然后你就知道你需要多少熵，并能想出如何得到它。

## 摘要

[Chris]指出这个演讲是一个大的概述。如果你的任务是设计一个安全的硬件系统，你将需要深入研究每一个细节。尽管如此，他有一个总结幻灯片，里面有很多好的建议，它会给你一个良好的基础，开始你自己的学习过程。

![](../Images/0319291cd27af2e5fac411c4cfbc136a.png)