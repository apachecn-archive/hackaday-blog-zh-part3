# 反向波兰符号及其令人困惑的优雅

> 原文:[https://hacka day . com/2017/10/24/reverse-polish-notation-and-its-milially-迷惑-优雅/](https://hackaday.com/2017/10/24/reverse-polish-notation-and-its-mildly-confusing-elegance/)

我做过的最好的翻箱倒柜的买卖是一件使用反向波兰符号的硬件。我知道你在想什么… RPN 听起来像一个销售噱头，我被当成了傻瓜。但我向你保证，它不仅是真实的，而且是计算发展过程中的一颗真正的宝石。

[![Best rummage sale find ever!](../Images/463740adf44766094b1a93f294db4c44.png)](https://hackaday.com/wp-content/uploads/2017/10/sinclair-scientific-angled-view.jpg)

Best rummage sale find ever!

20 世纪 80 年代的某个时候，当我还是一个长满痘痘的少年时，我在一次清仓大拍卖中捡到了一个计算器。它被一个漂亮的塑料盒保护着，当我把它带回家时，发现它是一个相当好的 Sinclair Scientific，它的芯片上有 1975 年的日期代码，因为任何有 Sinclair 徽章的东西都值得拥有，所以它以很少的钱成为了我的。它有一组腐蚀了的电池，损坏了它的一个终端，但是用一点铜条，我有了一个工作的计算器。

多好的计算器啊！当你通过键盘的丰富性来判断一个科学计算器有多酷的时候，它没有很多按钮。这个看起来更像一个普通的算术计算器，但是有三角函数的按钮模式和奇怪的回车键，而不是等号。箱子里的贴纸解释了这个秘密，这台机器使用了所谓的反向波兰符号，或 RPN。它在我的长凳上花了几年时间，然后被虔诚地放在辛克莱古玩的储存箱里，在写这篇文章时，我花了半天时间翻遍了房子才找到它。

[![Jan Łukasiewicz. Anonymous, [Public domain].](../Images/5adfa273b11d63a88a20239862463b6d.png)](https://hackaday.com/wp-content/uploads/2017/10/jan_c582ukasiewicz.jpg) 

【扬·尤卡西维奇】。匿名，[公共领域]。最近，当我读到一篇评论时，我想起了我的 Sinclair Scientific，这篇评论将 RPN 的发明者[Jan ukasiewicz](https://en.wikipedia.org/wiki/Jan_Łukasiewicz)介绍为工程师而不是数学家。我以前没有见过他，所以这开启了对他作品的迷人探索，加上作为一个成年人而不是作为一个挥舞着烙铁的青少年重新审视 RPN。简单地说，RPN 是一种编写数学方程的特定方法，它仍然是人类的，同时适合输入到内存有限的计算机中。

关于 RPN 首先要了解的是“波兰”部分来自于 ukasiewicz 的国籍。也许我们这些以英语为母语的人应该努力学习如何读他的名字。第二个教训是“反向”部分很重要，但这只是一个烟幕，只与写作方向有关。把表达式反过来写就是波兰符号，反过来写就是波兰符号。

PN 和 RPN 的特殊之处在于操作符不在操作数之间，而是跟随它们。举个例子，你可能习惯写 `2+2=`来得到 4，在 PN 中你会写` + 2 2 `，在 RPN 中你会写` 2 2 + `。

[ukasiewicz]是一位逻辑学家，他的符号设计的目的是在每个函数都有固定数量的参数时删除括号。因此，我们习惯于写`(2+2)*3` 来得到 12。在 PN 中我们写 `* + 2 2 3`或 `* 3 + 2 2` ，在 RPN 中我们写`2 2 + 3 *` 或 `3 2 2 + *` 。(后面的版本工作 b/c 乘法是可交换的。)

PN 和 RPN 可能是我们社区中的一些人在教育中听说过的稍微有趣的数学事实之一。但事实上它远没有那么晦涩难懂，因为 RPN 有一个非常有用的性质。它适合与堆栈一起使用来执行计算。操作数和运算符实际上已经排列好，可以通过它们的优先顺序相互区分，这意味着使用 RPN 比使用传统的符号更容易产生诸如计算器之类的设备。虽然我们这些仍然使用物理计算器的人习惯于传统的符号作为输入，但一些早期的计算器使用 RPN 以更少的资源做更多的事情。

这让我们回到我上面提到的辛克莱科学。当人们想到 RPN 计算器时，他们很可能会选择惠普作为制造商。你仍然可以购买使用 RPN 的惠普产品，事实上，不久前他们对 RPN 的坚持还被惠普认为是一个重要的卖点。但是辛克莱号有点不同。Clive Sinclair 总是擅长从最少的组件中提取最大的性能，以提供最低的价格，即使有时他的产品的质量或实用性因此受到影响。

这款计算器是 Sinclair 的最佳产品，采用了德州仪器(Texas Instruments)的廉价算术计算器芯片 TMS0805，通过 Sinclair 员工 Nigel Searle 的惊人编码，巧妙地提供了三角函数和对数函数。其结果是一个单芯片^∫科学计算器，其成本只是 TI 或惠普的几分之一，但代价是速度和浮点精度降低。几年前，我们报道过[【肯·希尔瑞夫】对辛克莱科技](https://hackaday.com/2013/08/30/ken-shirriff-completely-reverse-engineers-the-1974-sinclair-scientific-calculator/)的逆向工程，即使在今天，它仍然是一台有趣的机器。

在使用中，在飞行中再次学习 RPN 是一个令人沮丧的练习，随着时间的流逝，这变成了一个接近数学难题的东西，LED 显示屏从它的 4 节 AAA 电池中吸取能量。这在 1975 年可不是闹着玩的，因为一套 4 个碱性 AAA 级电池的实际价格会比现在贵得多。一旦你进入 RPN 区域，它真的非常符合逻辑并且容易使用，但是对于 Sinclair 来说就不一样了。它的大多数功能都需要复杂的按键序列，这意味着它的新鲜感会在一段时间后消失。尽管如此，以 70 年代早期的设计美学，至少它看起来很有吸引力。

从技术上来说，Cambridge 有 3 个芯片，TMS0805 和几个显示驱动器。但它们是处理器的附属部分，当时的惠普计算器使用 5 部分处理器芯片组。

HP9100A 镜像，第一个使用 RPN 的惠普计算器，Rama，[ [CC BY-SA 2.0](https://commons.wikimedia.org/wiki/File:HP9100A-IMG_0393.jpg) 。