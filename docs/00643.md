# 将青少年变成更好的 U2F 键

> 原文:[https://hack aday . com/2015/11/14/turning-a-teensy-into-a-better-u2f-key/](https://hackaday.com/2015/11/14/turning-a-teensy-into-a-better-u2f-key/)

几天前，我们看到一个项目使用[Teensy 构建了一个通用的第二因子(U2F)密钥](http://hackaday.com/2015/11/09/turning-a-teensy-into-a-u2f-key/)。虽然这个项目只是一个如何在任何 ol 微控制器上实现 U2F 的实验，而且创作者也承认它不是很安全，但那个帖子的评论却不是这样说:“做自己的东西是唯一安全的方法，”评论中写道。

事情发生了惊人的转变，在博客上写评论并不意味着你知道自己在说什么。事实证明，要对系统进行安全分析，您需要查看代码。令人震惊，是的，但是[makomk]仔细地看了看代码，发现它被严重破坏了。

Teensy U2F 密钥加密的关键错误在于 U2F 是如何执行的。在认证期间，设备将 U2F 密钥句柄发送给任何试图对其进行认证的服务。因为 Teensy 实现中的密钥仅使用 XOR 进行“加密”,所以只需要 256 次签名请求就可以恢复私钥。

最初使用 Teensy 作为 U2F 键的实验是一种教育努力，它从来没有打算被任何人使用。然而，在这个小小的安全课程上的*攻击*很有趣，【马科】[写了一个概念证明来演示他的攻击](http://www.makomk.com/gitweb/index.cgi?p=u2f-suck.git;a=summary)。这可能被用来从远程服务器执行攻击，但希望这不会发生，因为原始代码不应该在野外使用。