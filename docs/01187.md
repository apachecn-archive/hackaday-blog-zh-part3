# 我的付费电话运行 Linux

> 原文:[https://hackaday.com/2016/01/14/my-payphone-runs-linux/](https://hackaday.com/2016/01/14/my-payphone-runs-linux/)

为纪念电影《黑客》20 周年，旧金山 DNA Lounge 的老板杰米·扎温斯基(Jamie Zawinski)举办了一场盛大的派对——放映电影，设置滑冰坡道等等。他搭建的一个道具是一个旧的付费电话，但是他没有时间把它搬过来。他不想让这款手机做的一件事就是能够打电话。几周后，他举办了另一场派对，这次是放映《坦克女郎》。为了这次聚会，他有足够的时间将一台 Linux 电脑放入旧的付费电话中。当拿起手机时，它“拨”一个号码，这个号码会带来一个语音邮件系统，宣布事件的时间表和其他交互式的东西。像往常一样，这个项目一开始看起来很简单，但结果比他预期的要复杂得多。对我们来说，值得庆幸的是，他把自己的身体分解成一小块一小块的，让我们更容易理解他的所作所为。

这种构建是一件美妙的事情，所以让我们深入了解该项目涉及的内容:

#### ![sewing-needles-making-connections](../Images/d37cb5ac3036134d568a9a3bfc66186a.png)键盘

他的计划是将付费电话键盘的电线连接到 USB 数字键盘上。这些电线被焊接到旧付费电话键盘印刷电路板上的通孔。将这些电线连接到 USB 键盘上需要使用 Dremel 在一块丙烯酸树脂上钻 0.5 毫米的孔，间隔 1 毫米，大量的缝纫针，强力胶，Sugru 和几天时间来追踪不可靠的连接。

#### 电话听筒

他在深夜工作，手边没有 TRRS 千斤顶，他切断了一根旧电缆，设法将它的极细电线焊接到一个插头上。一个相应的插座被焊接到耳机扬声器和麦克风的四根线上。和大量的环氧树脂胶把它们粘在一起。

#### 计算机

Raspberry Pi 2 B 没有音频输入，所以他需要一个 Cirrus Logic 音频帽用于 Pi。他很难让 ALSA 带着音频帽跳探戈，所以他最终编写了一些自己的代码来检测键盘按钮，播放或记录信息。

#### 挂钩开关

最后，他需要检测挂钩开关的状态。听起来很简单，但他花了几天时间才让它发挥作用。事实证明，无论他尝试哪种方式，音频帽都会导致所有未使用的 GPIO 引脚“浮动”。最后，经过反复试验，他弯曲了 Pi 上的一个引脚，这样它就不会连接到音频帽，并直接将挂钩开关连接到它。

#### 软件

他的主要代码是用 Perl 编写的。在他使用的 Raspbian 版本中，读取 pin 状态在 Python 中有效，但在 Perl 中无效——它们总是浮动的。由于底层 BCM2835 库是用 C 语言编写的，所以他尝试用 C 语言编写代码，但也没有成功。像往常一样，python 在幕后施展了它的魔法。因此，他从 Perl 代码中调用 Python 脚本来完成这项工作，但这是在运行“root”下的所有内容之前，因为这是他可以读取引脚状态的唯一方式。仔细阅读他的博客文章的第 3 部分，其中包括代码的链接。

他曾想过添加更多的功能，但在做了这么多工作之后，他决定在事情变糟之前结束这一切。我们认为这里已经有足够多的成就让他感到骄傲。如果你需要一些关于[jwz]的介绍，他是从 1985 年就开始从事黑客工作的 emacs、Netscape 和 Mozilla。

感谢 Memals 博士]发送这个提示。