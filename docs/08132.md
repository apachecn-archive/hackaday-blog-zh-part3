# 34C3: Fitbit 嗅探和固件黑客

> 原文：<https://hackaday.com/2017/12/29/34c3-fitbit-sniffing-and-firmware-hacking/>

如果你走进健身房，要求闻闻运动器材，你会得到一些非常奇怪的眼神。如果你告诉黑客你嗅到了一个 Fitbit，你可能会被要求做一个演示。[Jiska]和[DanielAW]不仅能够从普通的 Fitbit 健身追踪器中嗅出蓝牙数据，他们还能够使用蚀刻在电路板上的测试点通过数据线连接到硬件。休息之后可以看到他们在 34C3 的 Fitbit 嗅探对话。我们感谢他们的警告，即打开 Fitbit 无疑会使您的保修无效，因为在密封的外壳被破解后，Fitbit 不会表现得那么好。这都是以科学的名义。

关于 Fitbit 通常如何工作，有一些有趣的背景。例如，Fitbit 与您的手机配对，需要通过云服务器进行验证。但是，一旦云服务器发回认证证书，它们将永远不会改变，因为它们被绑定到 Fitbit 的设备 ID。这个过程容易受到重放攻击。

Fitbit 和手机之间发送的数据可以加密，但有一种以纯文本形式发送数据的实时模式。这个实现看起来很安全，因为这个模式使用了一个新的蓝牙手柄。这种技术避免了将每个加密包发送到服务器进行解密的需要(这将是针对每个心跳包的)。到目前为止，解决这个问题的方法是禁用实时模式。如果你有自己的 Fitbit 可以玩，嗅探实时模式将是一个有趣的开始。

这种攻击的硬件部分从完全移除橡胶外壳中的 PCB 开始。该板正在运行 STM32，该团队希望通过启用 GDB 来获得深度访问。不幸的是，调试引脚只在复位期间启用，而股票固件在启动时禁用它们(这是应该的)。解决方法是重写固件，使必要的 GPIO 保持活动状态，这里有一个有趣的方法。你可能还记得[NEX mon 项目](https://hackaday.com/2016/09/08/nexmon-turns-nexus-5-and-rpi3-into-wifi-toolkit/)中的【Daniel Wegemer】对 Nexus 5 WiFi 进行了逆向工程。他利用他在 Nexmon 上使用的二进制补丁来修补 Fitbit 固件，以支持调试。鬼鬼祟祟！

关于 34C3 的更多信息，我们有第一天的备忘单，关于 Fitbit 安全性的更多信息，请查看这个 T2 的 WAV 文件。

[https://media.ccc.de/v/34c3-8908-doping_your_fitbit/oembed](https://media.ccc.de/v/34c3-8908-doping_your_fitbit/oembed)