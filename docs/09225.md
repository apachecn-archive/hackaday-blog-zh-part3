# 当检测线条比预期困难时

> 原文:[https://hack aday . com/2018/04/22/when-detecting-lines-is-than-expected/](https://hackaday.com/2018/04/22/when-detecting-lines-is-harder-than-expected/)

[Conor Patrick]对硬件开发并不陌生，在过去的几个月里，他有一个有趣的项目。他正试图创造一种工具来将技术图纸的图像(例如电子元件的足迹)转换成可以导入其他工具的数字格式。这可以自动将典型的封装图(如图所示)转换为 CAD 程序中的实际部件定义，从而真正加快定制部件的创建。

整个概念的关键是检测黑白技术图纸中的线条。对一些人来说，这听起来并不是一个特别具有挑战性的问题；选择一个或另一个内置的线路检测功能，可能需要一点预处理或后处理，就这样。事实证明，检测线路可能比预期的更难，一如既往，细节决定成败。

当[Conor]尝试一些现有的方法来检测线条时，结果起初看起来不错，但却令人沮丧。软件没有意识到在技术绘图中，一条线是从 A 点到 b 点的一个完整的单元。如果没有这种假设，应该是一条线的部分有时会丢失，或者单线被检测为多段而不是一个单元。与其他线交叉的线使事情变得复杂。检测到不需要的线条，如“1”或“Y”的下半部分。一定有更好的方法。

最终，一个适当利用源图像的性质并做出正确假设的定制解决方案会带来很大的不同。通过一些智能阈值设置，结合分别查看垂直和水平线条实例，可以比他尝试的任何其他方法更准确地定位线条及其长度。该系统还不能处理斜线，但是在应用相同的方法时，可以简单地迭代图像的旋转。如果您有更好的解决方案，[Conor]希望听到您的意见。

当然，垃圾进意味着垃圾出，可悲的是[并非所有的技术图纸都符合](https://hackaday.com/2017/12/14/truly-terrible-dimensioned-drawings/)。