# 艾伦·耶茨:为什么阀门的灯塔不能工作

> 原文:[https://hack aday . com/2016/12/21/Alan-Yates-why-valves-light house-cant-work/](https://hackaday.com/2016/12/21/alan-yates-why-valves-lighthouse-cant-work/)

[艾伦·耶茨]是黑客的工程师。他在 Valve 的工作是帮助他们找出让虚拟现实(VR)成为现实的硬件。他发明了一个足够聪明的装置，它真的应该工作，但也足够困难，T2 不知道如何让它工作。

在他在 2016 年 Hackaday Supercon 的演讲中，他向我们介绍了在将[灯塔](http://hackaday.com/2016/07/06/using-the-vives-lighthouse-with-diy-electronics/)推向市场的过程中最终克服的所有设计和工程挑战。我们仍然有点被这款设备的概念优雅所折服，所以拥有幕后的细节也很好。

 [https://www.youtube.com/embed/75ZytcYANTA?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent](https://www.youtube.com/embed/75ZytcYANTA?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent)

T2】

## 追踪很难

弄清楚观众的头部在房间里的位置(和方向)是虚拟现实的一个老问题，在过去的几十年里有许多解决方案。

[![image7](../Images/a2d43bcf03835784b41b72b6ba54609b.png)](https://hackaday.com/wp-content/uploads/2016/12/image7.png) 灯塔很聪明。它使用放置在房间内的几个信标，用红外线照亮房间。从这些信号中，房间里的任何接收器都可以通过三角测量来判断它的位置。基本思想是，灯塔系统不是测量角度，这很难做到足够的精度，而是从信标内的旋转镜反射红外光束——因此得名——这有效地将测量角度的问题转化为保持旋转速率非常恒定和测量时差的问题。

[![image42](../Images/1673cfdf8b962431dd803d5408a07de4.png)](https://hackaday.com/wp-content/uploads/2016/12/image42.png) 有一个房间范围的闪光灯进行同步，然后两道光束在 X 和 Y 方向扫过房间。从闪光和扫描之间的时间差，一个微控制器和一个光电二极管，加上一些三角学，你需要告诉接收设备在哪里。没有网络通讯，没有集中服务器，什么都没有；扫描的简单被动检测完成了大部分工作。

我们说大多数。清扫不会像你希望的那样频繁。大多数使用 Lighthouse 的系统还有一个惯性测量单元(IMU ),带有一个加速度计和一个陀螺仪。IMU 负责高频率的运动，并遵守较不频繁的灯塔更新。结合起来，该系统具有非常快速的响应以及长期的准确性。

## 纺纱

想象一下，你想在 5 米的范围内，在 1 毫米的范围内说出某个物体的位置。这就给出了 200 微弧度的角度:与一张打字纸在一臂长的距离内所对的角度相同！是啊。更糟糕的是:为了从三角测量程序中获得距离信息，他们需要四倍的角度分辨率。变成了一个时间，基于一个 60 赫兹的旋转圆柱体，这可以归结为在一个 48 兆赫的时钟周期内测量时间。对微控制器来说没问题。

[![image14](../Images/f83cbcd32046164214a8ef6eb28c5c50.png)](https://hackaday.com/wp-content/uploads/2016/12/image14.png) 但是要确保旋转的镜子以恒定的速度旋转到同样的精度是很困难的。他们使用了一个非常薄的光学反射传感器:94 纳米(T4)。然后是处理这些信息的电机控制系统。他们让它工作得足够好，在 2500 个原子内回到相同的位置。)使用塑料转子上的一块铝带，以及硬盘驱动器上的一些花哨的流体动力轴承马达。

然后是接收端。他们不能使用强得离谱的激光束进行扫描，因此有 120 dB 的模拟增益，同时进行一些信号调理。光束以大约 5 马赫的速度扫过传感器，传感器是一个普通的老式 BPW34，只有几毫米宽。

## 灯塔失败了

灯塔的成功之路看起来有点像我们办公室的地板——散落着失败的原型、由材料制成的半生不熟的想法和充满铅的试验气球。你可能期望工作的东西，像一个漂亮的花式滚珠轴承马达，结果会有很多摩擦和不规则的小故障。

[![image23](../Images/2ddcbf41a4cc718b1bb5af47d9e898f5.png)](https://hackaday.com/wp-content/uploads/2016/12/image23.png) 即使有了他们奇特的流体轴承马达，也有一切运转良好的时候，也有一切出错的时候。该项目的部分挑战是将所有这些误差测量到百万分之几。他们最终在运行中进行校准和校正。

为了建造原型，他们从易贝的激光线元素开始。对于蹩脚的概念证明来说，它们工作得很好，但根本不是按照 Valve 需要的高性能产品的规格建造的。此外，他们打算每件订购几十万件——他们需要在长期生产过程中保证同样的质量。这还没有考虑激光器的热量和寿命。

[![image28](../Images/bdf5acf7174d589a47c6f824ad7f0ead.png)](https://hackaday.com/wp-content/uploads/2016/12/image28.png) 采购镜片也好不到哪里去。他们是从一家公司订购的，这家公司给了他们一袋 10，000 个松散的镜片，到达时自然会有划痕。下一个制造商给他们送来了三种不同的镜片，在一个 SKU 名下出售。最终，他们不得不自己制作镜头，因为他们需要这样做。

## 未决问题

[艾伦]的谈话非常坦率。这就像他在对一群关心事物运作方式的有技术头脑的观众讲话。(他是。)这意味着他不仅要深入失败和绊脚石，还要深入设计中仍有改进空间的黑暗角落。

例如，光学同步仍然是一个未解决的问题。虽然非常聪明，但这可能是将系统扩展到更大房间的限制因素；它使用每眨眼 50 W 的峰值。同步光束所需的时间长度也会降低整个系统的速度。传感器无法对扫描做出反应，因为它们仍然被同步所蒙蔽。我们的未来有射频/光混合吗？

为了提高灵敏度，使用的光电二极管很大，但它们是现成的零件。因为他们需要看到房间里的每一个信标，所以他们有很多。这两个事实为制造更小的跟踪装置带来了设计挑战。

在机械马达系统上花费了所有的研究心血、汗水和泪水之后，[Alan]认为，如果能够以相同的分辨率工作，MEMS 或其他一些电光路径来产生扫描光束可能是一种改进。

传感器的距离是完全基于角度的三角测量。如果有可能在扫描激光中增加一个飞行时间测量组件，这将使 3D 定位变得更加容易。

## 黑客许可证

在演讲的最后，[Alan]指出，Triad Semiconductor 将向您出售分线板上的 ASIC，这将大大简化您自己的 Lighthouse-enabled 设备的创建。HTC 这个卖整个系统的公司，如果你不想要整个 VR 体验的话，会把信标单独卖给你。这是一项非常开放和可破解的技术。

事实上，当[CNLohr]正在对 HTC Vive 控制器之一使用的协议进行逆向工程时，不是别人，正是[Alan Yates]自己停下来给他提供了提示，没有透露任何剧透。现在*对黑客友好。*