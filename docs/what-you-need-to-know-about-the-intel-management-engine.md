# 关于英特尔管理引擎，您需要了解什么

> 原文：<https://hackaday.com/2017/12/11/what-you-need-to-know-about-the-intel-management-engine/>

在过去的十年里，英特尔一直在他们的中央处理器中包含一个微小的微控制器。这个微控制器连接到一切，可以在你的硬盘和网络适配器之间传输数据。它总是开着的，即使电脑的其他部分都关闭了，使用正确的软件，您可以通过网络连接唤醒它。在美国国家安全局的要求下，这种间谍芯片的一部分被包含在硅片中。简而言之，如果你正在设计一个硬件来监视每一个使用英特尔品牌电脑的人，你会得到类似英特尔管理引擎的东西。

上周，研究人员[Mark Ermolov]和[Maxim Goryachy] [在 BlackHat Europe](https://hackaday.com/2017/12/07/another-defeat-of-the-intel-management-engine/) 展示了一个漏洞，该漏洞允许在英特尔 ME 平台上执行任意代码。这只是一种本地攻击，需要物理接触机器。不过，秘密已经泄露了，这是我们一直期待的漏洞。这种利用迫使英特尔和原始设备制造商考虑英特尔管理引擎的安全隐患。这实际上意味着什么？

### 管理引擎是什么和做什么

[![](img/1c7103978b48ee2d81b50bf45953f3d8.png)](https://hackaday.com/wp-content/uploads/2017/12/ime_is_on.jpg) 英特尔的管理引擎只是隐藏在一些最新的英特尔 CPU 内部的工具、硬件和软件集合的一小部分。这些芯片和软件在 21 世纪初作为可信平台模块首次出现。这些小密码芯片形成了计算机上“信任”的根源。如果 TPM 可以被信任，则整个计算机都可以被信任。然后是主动管理技术，一套用于以太网控制器的嵌入式处理器。该系统背后的想法是允许在企业环境中供应笔记本电脑。这些年来，CPU 增加了更多的硬件。这就是英特尔管理引擎，一个连接到计算机每一个外围设备的小系统。英特尔 ME 连接到网络接口，并连接到存储设备。英特尔 ME 仍然开启，即使您的计算机已关闭。理论上，如果你在连接到关机计算机的键盘上打字，英特尔 ME 可以将这些按键发送到未知的服务器。

除了在黑帽发布 ME exploit 之外，我们在过去几周也学到了很多。ME 实际上运行的是 Minix T1，这是一个由 Andy Tanenbaum 创建的“业余爱好”或“教学”操作系统，也是孕育了 Linux 的操作系统。关于 Minix 和 Linux 的 BSD 许可和 GPL 许可有一个重要的讨论，但是那是另一个时间的争论。

几年来，研究人员一直在研究英特尔在其最新 CPU 中包含的芯片组。不幸的是，英特尔决定采用封闭源代码的方式，因此安全研究人员知道英特尔 ME 可以做什么，但不知道如何做到这一点，也不知道是否存在任何安全漏洞。本周，这堵墙被攻破了。现在，任何人都可以用 u 盘在英特尔 ME 上执行任意代码。

### 减轻

面对英特尔管理引擎的巨大问题，普通人能做些什么来减轻安全风险吗？有什么办法可以把我关掉吗？值得庆幸的是，有一些警告。

优秀的 Linux 笔记本电脑和台式机制造商 System76 已经发布了他们自己的固件更新来禁用 ME。此外，戴尔现在正在销售一款笔记本电脑——加固型 latitude 14——默认选项为残障 ME。显然，有安全意识的人是有市场的。

然而，如果你已经拥有一台计算机，那么你的机器里可能有一个管理引擎，并且它正在运行。除了买台新电脑，你还有什么选择？移除 ME 的第一步是查看它是否确实在运行。为此，[英特尔发布了一款检测运行 ME 的工具](https://www.intel.com/content/www/us/en/support/articles/000025619/software.html)。

[![](img/bac932795fcdc87f1b50e2cc622fd729.png)](https://hackaday.com/wp-content/uploads/2017/12/ime_turn_off.jpg) 然而，仅仅探测到我是不够的。你需要关闭它。不幸的是，ME 的实现取决于主板制造商，没有通用的方法来关闭它。这也许是 ME 带来的最大的安全威胁；没有一个简单的工具在任何情况下关闭 ME，我们只剩下关于如何为个别品牌和型号的计算机禁用 ME 的说明和教程。

为此，一些主板制造商和原始设备制造商在过去一周左右的时间里想出了禁用 me 的方法，预计整个行业都会对此问题做出回应，您的主板原始设备制造商会提供关于如何禁用 me 的方便指南。

所有这些都是不完整的解决方案。最近针对英特尔 ME 的邪恶女仆漏洞，需要物理存在，仅在高于 V. 11 的 ME 版本上有效。虽然这确实排除了所有 MAC，但仍有可能发现其他漏洞，影响早期版本的 ME。你怎么把整个东西关掉？

可惜不能。没有有效 ME 固件的计算机会在三十分钟后关闭。然而，[me _ cleaner 工具](https://github.com/corna/me_cleaner)做了一些相当聪明的事情:它欺骗 ME 认为它有有效的固件，但实际上什么也不做。[我们在这个黑客第一次发布的时候看了一下](https://hackaday.com/2016/11/28/neutralizing-intels-management-engine/)，是的，如果你从 ME 的 rom 中删除第一页内存，它会停止工作，但仍然允许你的计算机运行。

### 今年最大的“我告诉过你”

英特尔 ME 是一个微小、不起眼的硬件，几乎被锁在每一个现代英特尔 CPU 中。它连接到您的存储和网络接口。如果有人可以访问我，他们拥有你的电脑。现在，对我来说最好的利用——或者最差的，取决于你的观点——只是邪恶女仆场景的变体。这种利用需要对设备进行物理访问，我们都知道物理访问最终是根访问。在这种情况下，以及任何现实的威胁模型，当前对英特尔 ME 的利用有点言过其实。

[![](img/9d0fe1de8fe6d7e19e2b5eec45e87559.png)](https://hackaday.com/wp-content/uploads/2017/12/ime_absurd.jpg) 考虑这个阶段一。对 ME 的最终利用是通过网络接口。有了它，世界上任何地方的任何人都可以拥有一台装有 ME 的电脑。这种利用还不存在，我们知道这是因为没有新的大规模僵尸网络挖掘比特币。

在那一天到来之前，我们只能意识到，是的，书呆子们是对的。国家安全局在每台电脑上安装硬件的想法听起来很荒谬，直到你意识到这真的发生了。

在过去的几十年里，普通大众在信息安全的世界里被拖得又踢又叫。在 80 年代，这就像不把密码写在便利贴上一样简单。几年后，我们将开始讨论 Alexas 和 Google Homes 是如何成为奥威尔式的噩梦。到那时，我们将不得不使用英特尔 ME 漏洞作为另一个例子来说明安全性是多么重要，以及倾听人们告诉你“这很糟糕”是多么重要。不能被审计的代码是不能被信任的代码。