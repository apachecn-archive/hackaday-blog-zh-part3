# 双中心温度传感器

> 原文:[https://hack aday . com/2018/04/16/two-cent-temperature-sensors/](https://hackaday.com/2018/04/16/two-cent-temperature-sensors/)

当他们需要在项目中增加温度控制时，许多黑客会使用 K 型热电偶来满足他们的高温需求，或者在温度没有那么高的时候使用 T2 集成温度感应 IC。热电偶依赖于非常小的电流和极高的增益，您很可能需要一个专用 IC 来读取它，这可能非常昂贵。集成电路没有那么贵，但基本上仅限于烧开水。如果你想控制回流焊炉，你会怎么做？

有一种更便宜的方法，跨越南极冬天和熔化焊料之间的范围，你可能已经在你的货架上找到了零件。假设您的项目中已经有一个带 ADC 的微控制器，即使您没有，也只会让您多花两美分。BOM:一个普通二极管和一个电阻。

![](../Images/77bee6059e7a6b97e12714830a99297e.png)

去年，我在三个项目中使用二极管作为温度传感器:一个是将咖啡豆加热到 220°C 的咖啡烘烤器，另一个是最高温度约为 210°C 的回流加热板，第三个是保持非常稳定的 130°C 的调色剂转移铁。在所有这些情况下，我并不真正关心温度的实际数值，重要的是可重复性，所以我从来没有费心校准任何东西。我想我会为 Hackaday 做好这件事，并尝试将不起眼的二极管推向科学的极限。

结果是 PCB 起火，测试电路在 190°C 以上脱焊，温度探头松动，最后我的桌子上到处都是坏掉的 ramekin 和 200°C 花生油。欢乐时光！另一方面，我设法获得了足够的数据来校准一些二极管，结果非常好。测试中的电路包括最佳实践和最简单的可能工作方式，结果非常接近。对于大多数温度范围，这绝对是你想要掌握的一项技术。当然，细节决定成败，所以请继续阅读！

## 二极管

我们都知道普通硅二极管的正向压降是多少，对吧？0.6 V 或 0.7 V 左右，对于许多基于纸巾的计算来说已经足够了。但是这个电压降取决于两个主要因素:[你驱动通过二极管的电流，和温度](https://en.wikipedia.org/wiki/Shockley_diode_equation)。如果保持电流不变，读取正向电压，就得到一个温度传感器。虽然二极管之间可能略有不同，但图中的响应为-2mV/°c。

![](../Images/8ef3ead92afb90019052c8699e878c5d.png)

保持电流“固定”可以像使用电阻器一样简单:因为二极管的正向电压不会改变太多，所以通过电阻器的电流几乎是恒定的。你所要做的就是选择一个合适的电阻值。下一步是用两个晶体管构建一个恒流电源。我在这里测试了这两种方法。

不过，这已经不是新闻了。复杂度上的下一个台阶是大多数 IC 温度检测芯片使用的“[硅带隙温度传感器](https://en.wikipedia.org/wiki/Silicon_bandgap_temperature_sensor)”。用两个晶体管代替二极管，用运算放大器抵消共模缺陷。这在 IC 中非常有效，因为两个晶体管几乎相同，温度也相同，但对于 DIY 来说，这增加了更多的复杂性。如果你想深入了解细节，这里有一份[白皮书](https://hackaday.com/wp-content/uploads/2018/04/sboa019.pdf)。

然而，我的目标不是精确到几分之一度，而是对最简单的自制黑客解决方案的精确度感兴趣。加入一个真正的恒流源会得到什么？值得吗？让我们找出答案。

## 试验设计

我拿了七个二极管，六个 1N4148s 和一个 1N4002，用一个 K 型热电偶和一个非常好的 Fluke 万用表加热。1N4148 是一款绝对标准的小信号二极管，它采用非熔融玻璃外壳:非常适合我们的目的。其中三个 1N4148s 通过一个 10kω电阻提供电流，因为这是一个很好的中间值，我想评估二极管间的可变性。选择了另外两个电阻值，即 3.3kω和 100kω，大致涵盖了合理的电流范围。

[![](../Images/b9976df7d9d14a40965c830502783355.png)](https://hackaday.com/wp-content/uploads/2018/04/dscf0672.jpg)

Resistors and a constant-current source

我将高压、大电流整流二极管 1N4002 与一个 10kω电阻配对，观察不同类型的二极管会产生什么影响。最后，最后一个 1N4148 由一个恒流电路驱动，直接来自于*电子技术*，提供相当稳定的 50 μA 电流。

STM32 微控制器被编程为每当我输入温度时从每个二极管读取读数。如果我有一个测井万用表，这可能会少很多无聊。事实上，我等待显示的基准温度达到一个 5 度的值，并将其输入 STM32，STM 32 读取 7 个 ADC，并通过串行端口打印所有这些值。所以我会加热所有的二极管，当它们慢慢冷却时，在我的笔记本电脑上记录数据，完成后清理，并绘制图表。

听起来很简单，对吧？这就是有趣的地方。真正的诀窍是确保所有七个二极管和一个热电偶处于相同的温度，从室温一直到烧 PCB。

## 四次失败等于一次成功

在与 Hackaday 的 Mike Szczys 交谈时，他问当温度超过焊料的熔点时，如何焊接二极管。我很自然地回答说，我总是在这些情况下压接(这是真的)，然后继续建立一个焊接连接的二极管测试台。在某处读到过花生油在 210 摄氏度左右是有效的，我认为它是一种很好的浸泡介质，可以平衡温度。事实的确如此，因为所有的焊点在 190°C 的温度下同时脱落:这是对温度均匀性的巨大考验。这也是对我的参考温度探头的一次有价值的校准——60/40 焊料的[熔点为 185°C–190°C。准确无误！但是，当电线未焊接时，不会记录任何数据。](https://en.wikipedia.org/wiki/Solder)

当我回流时，我使用一个带(压接)二极管的热板作为温度传感器，但我通常会用胶带将另一个或两个二极管粘在有问题的 PCB 上，以便进行 PCB 上测量。因为这些二极管的腿在微风中摇摆，我已经摆脱了焊接点。所以我认为这在这里也行得通，所以我重新焊接了测试装置，用七个新二极管粘在一块空白 PCB 上，以平衡温度。一切看起来都很顺利，直到我闻到烟味时，温度刚好低于我的目标温度 250 摄氏度。我立即关掉加热器，开始记录温度，果然温度下降了。然后它们又开始上升，并且有更多的烟。

[![](../Images/2191c8f8bcf498447db9c3b5a5fdc343.png)](https://hackaday.com/wp-content/uploads/2018/04/run13.jpg)PCB 的环氧层着火了！事实证明，它在大约 240 摄氏度时开始闷烧，在 260 摄氏度时燃烧良好。我没有去拿灭火器，而是打开了一些窗户，继续记录，并拿出了一台相机。实际上，我从跑步中得到了一些数据，但我的办公室仍然有一点味道。

下一个失败是将二极管直接贴在一块坚固的金属板上。毕竟，它不会在 250 摄氏度燃烧。问题是，除非你将它从陶瓷加热元件上取下，否则它的冷却速度会非常慢，在这个过程中，二极管和热电偶会从板上松开，导致整个电路板的温度异常下降 5 度。事实证明，这种情况在 firey-PCB 的运行中也发生得较少。你可以在后期制作中通过一些数据处理来解决这个问题，但是我决定再给热油处理一次机会，因为它很好地解决了接触问题。

[![](../Images/ec1c3d57ef8612ed7596afcd76b657ab.png)](https://hackaday.com/wp-content/uploads/2018/04/run23.jpg) 最后一次还是用花生油，但这次是从 200°C 左右的较高温度开始，没有完全浸没焊点。如果不是因为 ramekin 在碰到我用来冷却它的大理石板时破裂，它也可以工作。回想起来，这是显而易见的，如果我放上硅胶热垫，它可能会完美地工作。我的桌子上漏了 200 摄氏度的油，还有大量的纸巾，我设法记录了这次运行，至少直到油都用完了。我明天会打扫的。

最终的结果是:两个可用的数据集，一个来自烧坏的 PCB，另一个来自裂罐油浸测试。没有什么是完美的，但这足以得出一些结论。

## 结果

我的第一个结论是，最简单的方法是将一个二极管和一个 10kω电阻馈入 ADC，足以在任何合理的温度范围内进行非精密工作。我是用它来回流焊料和烘焙咖啡时知道这一点的，但与热电偶基准电压源相比，二极管的良好线性度仍然给我留下了深刻的印象。你应该使用这个“技巧”。

接下来，除非你真的关心温度，否则建立一个恒流源可能不值得。如果简单的再现性就可以了，那就不用麻烦了。是的，我在最高 220°C 时获得了绝对漂亮的结果，但在整个范围内，最佳和最差情况之间的差异可能只有一两度。你应该先花时间确保二极管和被测物体之间的良好物理接触，然后再连接晶体管。

1N4002 是一个大而结实的二极管，当馈入相同电阻时，其性能几乎与 1N4148 相同，三个 1n 4148 完美地相互跟踪。唯一重要的是水流。老实说，我很惊讶。这表明，您可以简单地购买一袋二极管和 1%电阻，也许校准几个来验证，就大功告成了。由于所有二极管的斜率几乎相同，您甚至可以在室温下用一个点来校准它们。这有多简单？

想知道这其中真正困难的是什么吗？在电路工作范围之外测试电路。

[https://videopress.com/embed/4tPzJeY3?hd=1&cover=1&loop=0&autoPlay=0&permalink=1&muted=0&controls=1&playsinline=0&useAverageColor=0](https://videopress.com/embed/4tPzJeY3?hd=1&cover=1&loop=0&autoPlay=0&permalink=1&muted=0&controls=1&playsinline=0&useAverageColor=0)