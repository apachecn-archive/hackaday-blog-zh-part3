# 让我们谈谈英特尔，熔毁，和幽灵

> 原文:[https://hack aday . com/2018/01/05/let-talk-Intel-meltdown-and-spectre/](https://hackaday.com/2018/01/05/lets-talk-intel-meltdown-and-spectre/)

本周，我们看到了大量关于英特尔处理器漏洞的新闻报道。我们确信现在你已经听说过(也许已经厌倦了)Meltdown 和 Spectre。然而，作为一名 Hackaday 读者，当其他人需要获得这样的新闻要点时，你可能会成为他们的求助对象。既然这已经在大众媒体的最高层以淡化的版本出现，让我们看看什么是 Meltdown 和 Spectre，也看看这个三环马戏团的其他两环发生了什么。

### 熔毁和幽灵一言以蔽之

这两次攻击是相似的。Meltdown 是特定于英特尔处理器的，内核修复(基本上是由操作系统实现的变通办法)将导致 5%-30%的速度损失，具体取决于 CPU 的使用方式。Spectre 不仅限于英特尔，还会影响 AMD 和 ARM 处理器，内核修复预计不会带来速度损失。

黑客之友、杰出的安全研究员 Joe Fitz 写了一篇关于这类攻击的精彩的通俗解释。他对“门外汉”这个术语的使用可能比正常水平高一点——这是你需要阅读的东西。

这种攻击利用了一种叫做分支预测的东西。为了提高速度，这些处理器在内存中保存了过去分支行为的缓存，并使用它来预测未来的分支操作。分支预测器在检查您是否有权限访问数据之前将数据加载到内存中。显然你不知道，所以你不会有足够的内存来读取。该漏洞利用了一个巧妙的猜测游戏来查看其他文件，这些文件也是由您有权访问的预测器返回的。如果您足够聪明，您可以通过多次迭代这个技巧来重建受限数据。

要获得最全面的信息，你可以阅读关于 [Meltdown](https://meltdownattack.com/meltdown.pdf) 和 [Spectre](https://spectreattack.com/spectre.pdf) 的 PDF 白皮书。

**更新:**查看[艾伦·海托华对熔毁漏洞的解释](https://hackaday.com/2018/01/05/lets-talk-intel-meltdown-and-spectre/#comment-4291735)评论如下。非常有助于更好地理解这是如何工作的。

### 来自内核开发人员的挫折

这些漏洞存在于芯片中——它们无法通过微代码更新轻松修复，这是 CPU 制造商通常解决芯片勘误表的方式(尽管这似乎是一个架构缺陷，而不是勘误表本身)。英特尔的“修复”相当于产品召回。他们已经表示不会进行召回，但是这怎么可能呢？启动晶圆厂以替换所有正在使用的英特尔芯片需要多长时间——哎呀！

所以修复工作落在操作系统的内核层。英特尔应该(很可能在幕后)向拯救他们的内核开发者低头。可以理解，不得不花费时间和资源修补这些漏洞是令人沮丧的，这取代了计划的功能更新和改进。莱纳斯·托沃兹一直在贬低英特尔——这种挫败感的轶事证据:

> “我认为英特尔内部的一些人需要认真审视他们的 CPU，并实际承认他们有问题，而不是写公关广告说一切都按设计运行。”

这是他发布在 Linux 内核邮件列表上的信息[中最温和的部分。](https://lkml.org/lkml/2018/1/3/797)

### 股票销售混乱只是一种干扰

周二听到这些漏洞后，我做的第一件事就是查看英特尔的股价，令我惊讶的是，它并没有下跌多少。事实上，从峰值到峰值，本周仅下跌了约 8%,并从低点有所回升。

当然，有消息称，早在 11 月份，英特尔首席执行官布莱恩·科赞尼克就抛售了他的英特尔股票达 2400 万美元，使他降到了合同规定的最低股份。他在安排交易时很可能知道 Meltdown。忍住对这个决定发火的冲动。不管合法与否，讨厌这个家伙只是分散注意力。

我更感兴趣的是:英特尔太大了，不能倒。我们都要做什么，停止使用英特尔，开始使用其他东西？你不能只把芯片拔出来，然后放一个新的进去，在台式电脑的情况下，你需要一个新的主板加上所有支持的东西，比如内存。对于服务器、笔记本电脑和移动设备，您需要更换整个设备。英特尔市场份额巨大，硅生产周期长。[分支预测](https://en.wikipedia.org/wiki/Branch_predictor)早在 1995 年 Pentium Pro 将其引入 x86 架构时，在消费类 CPU 中就已经很常见了。这是一个基础的一部分，将被拉出来，并被新的设计所取代，新的设计提供了相同的速度优势，但没有相同的风险——但这需要时间才能进入现实世界。

CPU 是基础设施，这是迄今为止最响亮的钟声，表明它们的设计对社会有多么重要。是时候认真看看开放芯片设计会带来什么了。你不能说这可以通过开放式设计来避免。你可以说，如果有两家以上的公司生产世界上所有的处理器，而这两家公司都受到这些漏洞的影响，那么通往没有这些问题的新处理器的道路将会更短。