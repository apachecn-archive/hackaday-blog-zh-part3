# 无焊接闪光臂

> 原文:[https://hack aday . com/2017/03/20/flash-and-arm-a5-with-no-soldering/](https://hackaday.com/2017/03/20/flashing-and-arm-a5-with-no-soldering/)

[Sami pietik inen]正在开发一款基于 Atmel SAMA5D3x ARM-A5 处理器的嵌入式 Linux 设备。通常，嵌入式 Linux 系统会从闪存或 SD 卡启动。但是，如果你在瞎搞，或者出于任何原因只想避开正常操作，你可能会想绕过正常的引导过程。在芯片的数据表中，有一种方法可以通过焊接一根线来拉 BMS 引脚，从而进入启动模式。正如[萨米]所展示的，[在](https://pagefault.blog/2017/03/14/access-hardware-from-userspace-with-mmap/)中也有一种软件方式，它利用了`mmap`，这是一个你应该知道的非常强大的 Linux 功能。

嵌入式 Linux 设备和 Arduino 或 clone 中的微控制器并没有你想象的那么不同——你只是没有读过前者的数据表。如果你对微控制器有深入的了解，你会习惯于通过改变内存映射硬件寄存器中的位来控制芯片功能的范例。扳动这个按钮，一个 LED 灯就亮了。翻转该位，就可以改变 PWM 外设的时钟速度。诸如此类的事情。

在 Atmel 的 SAMA5D3x 中，有一个控制初始引导介质的寄存器。不足为奇的是，没有人写过设置这些位的 Linux 设备驱动程序，所以你必须自己翻转它们。简单的方法是使用`mmap`,正如它所说的——将内存中的一个区域映射到某个物理外设，反之亦然。

大多数时候，你最好使用内核及其驱动程序，而不是直接用`mmap`设置寄存器——例如，没有防止多重访问的机制。除了直接内存映射文件之外，使用`mmap`最适合用来调试设备驱动程序或使系统崩溃。除非你需要通过直接设置一些位来控制一个芯片的引导模式，也就是。

[Sami]的演示不是什么超级秘密，你们中的一些人会大叫“不是黑客！1!!"因为他只是直接使用制造商数据表中的信息，但我们发现他的文章是一个很好的教程，提醒我们内存映射在弥合你可能认为的计算机和微控制器之间的差距方面是多么强大。如果您想尝试嵌入式 Linux 系统，并且可以获得 root 权限，`mmap`可能就是您的不二之选。或者你可能只是对快速闪烁的发光二极管 T2 感兴趣。选择你的毒药。