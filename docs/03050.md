# 用于 AVRs 的加密 USB 引导程序

> 原文:[https://hack aday . com/2016/07/23/encrypted-USB-boot loader-for-avrs/](https://hackaday.com/2016/07/23/encrypted-usb-bootloader-for-avrs/)

对于在枕头下放着一袋各种微控制器 flash 程序员的黑客来说，这可能没什么关系，但对于一个应用固件升级的最终用户来说，方便才是王道。这些天来，这意味着使用 USB，有几个很好的 AVR USB 引导加载器。

但是[Dmitry Grinberg]想要更多:[加密 ROM 镜像的能力](http://dmitry.gr/index.php?r=05.Projects&proj=20.%20ModulaR%20BL)并且验证它们在传输过程中没有被篡改或者被弄糟。结合 USB 需求，这意味着编写自己的引导程序和 PC 端工具。如果没有密码，他的引导加载程序将进行未加密的上传，但如果是用密钥编译的，它将只接受(正确地)加密的十六进制文件。

由于包括 USB 固件在内的引导加载程序的大小为 3.3 kB，因此[Dmitry]包含了钩子，以便在目标应用程序中重用引导加载程序的 USB 代码。因此，如果你打算在你的程序中使用 V-USB，它实际上并不会占用太多的额外空间。这是一个可爱的把戏，但它以一种让我们心惊肉跳的方式将引导装载程序和用户程序联系在一起，而不知道为什么。也许我们可以在评论中讨论这个问题。

如果你需要 AVR USB bootloader，但是不需要加密，我们喜欢[微核](https://hackaday.com/2014/03/04/interrupt-free-v-usb/)。但是，如果您需要向用户交付更新，而不让他们能够在中途修改(或搞砸)代码，请尝试一下[Dmitry]的设置。