# 转变香料

> 原文:[https://hackaday.com/2016/03/02/transforming-spice/](https://hackaday.com/2016/03/02/transforming-spice/)

Spice 是一个电路模拟器，您的工具箱中应该有它。虽然模拟器不能告诉你所有的事情，但它通常会在你构建电路之前，就让你对电路的工作方式有一个有价值的了解。在这个由三部分组成的系列的第一部分中，[我查看了 LTSpice，并对 DC 赛道做了一个快速的视频演示](http://hackaday.com/2016/02/26/adding-spice-to-your-workbench/)。在第二篇文章中，我[研究了 Spice 的另外两个部分:参数扫描和交流电路](http://hackaday.com/2016/02/29/spice-power/)。在这最后一部分中，我想多谈一点现实世界中的元件性能，并看看变压器建模。

## 概述

[![lowpasss](../Images/a36454215876c433adb4222358673405.png)](https://hackaday.com/wp-content/uploads/2016/02/lowpasss.png) 上次我们看了一个低通滤波器，但是不实用，因为元件太完美了。只有在模拟中，电压源和导线的电阻才为零。也没有负载电阻，这不太可能。即使是示波器探头也会给电路带来一点负载。

交流分析结果显示，滤波器响应良好，在 1 kHz 左右呈平坦状态，然后随着频率的增加开始滚降。假设信号源有一个 8 欧姆的串联电阻。这如何改变电路响应？

## 一条真实世界的赛道(几乎)

[![plot8](../Images/81ecf4fb69275fb6eac30ff443f3d556.png)](https://hackaday.com/wp-content/uploads/2016/02/plot8.png) 这个问题很容易用 Spice 来回答，左边的情节也很容易看出来。绿色轨迹是原始响应，蓝色轨迹是新曲线。可以看到，滚降开始得更早，衰减得更快。这可能更准确，但仍不完全正确，因为没有负载跨接在`C1`两端。

不过，这很容易解决。假设这是一个放大器，输入电阻为 2K 欧姆。最终的情节没有太大的不同。但是，如果负载接近`R1`的值，情况就大不一样了。看看这个图(我使用注释特性添加了一些标签和箭头):

[![plot2](../Images/27c3dc3291b1280148ff4df2dd1a50a6.png)](https://hackaday.com/wp-content/uploads/2016/02/plot2.png) 当负载为 1 欧姆时，损耗大于其他情况，虽然通带平坦得多。

当然，还是有不准确的地方。例如，电线有电阻，但除非你有很长的电线，那可能没关系。正常的电阻没有太大的电感，除非它是线绕的。电容器的寄生元件因电容器的种类而异。如果你问 Spice，它可以模拟所有这些。尝试右键单击电容器并选择实际的供应商零件。这将填充诸如等效串联电阻和电容器的其他参数之类的东西。您将看到曲线根据您选择的单位略有变化。

现实电路中的另一个考虑因素是极限。Spice 中的电阻可以消耗无限多的功率。在现实生活中，当应力过大时，电阻和其他元件最终会烧毁或失效。在用任何模拟器测试设计时，请记住这一点。

## 变形金刚(电影名)

在 Spice 中建模的一个棘手的项目是变压器。在 LTSpice 的 components 部分你找不到变压器。相反，你必须用电感器来建造一个。毕竟，变压器只是两个电感(初级和次级)。由于耦合，初级线圈磁场的变化会在次级线圈中感应出电流。两个线圈的耦合程度会影响变压器。

在设计合理的变压器中，关键的设计特征是线圈匝数比。匝数比为 1:10 的变压器会将电压升高十倍(或者，将变压器翻转过来，电压会降低 10 倍)。

要在 Spice 中建模变压器，需要为初级和次级创建一个电感。电感值并不重要，但比值很重要。规则是电感比是匝数比的平方。也就是说，一个 1 亨利的初级线圈和一个 100 亨利的次级线圈代表一个匝数比为 1:10 的变压器。

使线圈成为变压器的是一种`K`-陈述。一旦感应器就位，使用 Spice 指令图标(带有的图标。op on it)插入这样一个语句:

```
K1 L1 L2 1
```

注意`K1`前面没有句号。这定义了一个由`L1`和`L2`组成的变压器，耦合系数为 1，这足以满足你的大部分需求。如果你需要更多的变压器，你会使用`K2`、`K3`等等。具有多个绕组的变压器是可能的。把它们都列在同一个`K`语句里就行了。

[![xf1](../Images/938fbcc505e4c1d3a883158d0a08b109.png)](https://hackaday.com/wp-content/uploads/2016/02/xf1.png) 关于示意图右边有几点需要注意。首先，使用 Spice，您无法将完美的电压源直接连接到电感。这就是为什么`V1`包含了一点串联电阻。其次，Spice 原理图中不能有任何完全隔离的电路。我不想要一个共同的地面，所以我增加了`R2`，在 5 Mohm，还不如是一个开路。

因为电感器的电感比为 100:1，所以变压器的电压比为 10:1。从逻辑上讲，`V1`的 1 V 输出应该在`R1`上变成 10 V。模拟输出清楚地显示了这种情况(见下文)。

[![xf2](../Images/c3a3673826f18a9cd132f7b6f3e0eee6.png)T2】](https://hackaday.com/wp-content/uploads/2016/02/xf2.png)

你可能知道变压器以匝数比的平方“反映”它们的次级阻抗。观察该变压器的初级线圈，您会发现其负载相当于次级线圈负载的 1/100。换句话说，流出`V1`的电流应该与 1 欧姆电阻相同。

由于`V1`设置为 1 V，因此不需要计算器就能知道 1 V 变为 1 ohm 应产生 1 A。如果单击`V1`内的探针来测量电流，您将看到一个从-1 A 到 1 A 的正弦波，正如您所料。

## 辛辣发展

Spice、LTSpice 和类似工具是试验和深入了解电子设计的绝佳方式。这里的例子很简单，但是你可以在 [Linear 网站](http://www.linear.com/designtools/software/demo_circuits.php)或者[雅虎集团](https://groups.yahoo.com/neo/groups/LTspice/info)找到一些更复杂的例子。

不过，你必须记住，模拟只能让你到此为止。最终，你必须烧热烙铁，构建这些设计，看看它们在现实世界中的表现如何——尽管还不够理想。