# 电路 VR :(几乎)实用的降压转换器

> 原文:[https://hack aday . com/2018/07/27/circuit-VR-an-almost-practical-buck-converter/](https://hackaday.com/2018/07/27/circuit-vr-an-almost-practical-buck-converter/)

在《电路 VR》的[最后一集](http://hackaday.com/2018/07/06/circuit-vr-simple-buck-converters/)中，我们围绕一个简化的降压转换器走了一圈。主要的简化是使用恒定的 PWM 信号。结果是输出电压是输入电压的固定部分。对于调节器，脉冲宽度将需要取决于输出电压，以便输出的任何变化都是自校正的。这一次，我们将制作一个调节器，尽管我们仍将使用一些在实际设计中需要替换的香料元素。特别是，我们假设您可以产生一个三角波，这很容易，并产生一个稳定的 2.5 V 基准电压。

想法是采用一个基准电压源，并将其与输出进行比较。我们将二者之差视为误差电压，并使用一个与三角波发生器结合的比较器来产生与误差成比例的 PWM 信号，从而保持输出电压恒定。

## 玩三角游戏

如果你需要复习三角波和比较器如何产生 PWM，请查看上一篇文章。作为复习，这是我选定的架构。

[![](../Images/d49dc25b3ec56bab5de9a7138f078f43.png)T2】](https://hackaday.com/wp-content/uploads/2018/06/smps.png)

我再一次采取了一种垃圾箱的方法——如果你心中有明确的目标并仔细考虑过，你可能会选择更好的组件。我只是抓住可能的部分，并想让它们工作，就像我在我的物理垃圾箱中筛选一样。

我唯一简单的方法就是三角波发生器。如果你在 Spice 中寻找一个特定的三角波发生器，你会失望的。但是脉冲块可以做到。我将参数设置为如下:

```
V2 N006 0 PULSE(15 0 0 .0000005 .0000005 0 .000001)
```

[![](../Images/bfa9ce35f1eee18ac7ade1b038f5e3f4.png)](https://hackaday.com/wp-content/uploads/2018/07/tri.png) 当然，你需要使用 LTSpice GUI 来输入。电压为 15 V，上升时间为 500 nS，下降时间也为 500 nS。周期为 1 uS。想一想。由于上升时间是周期的一半，下降时间是周期的另一半，所以结果总是上升和下降。

## 在电路内部

你可以像往常一样在 [GitHub](https://github.com/wd5gnr/circuitvr/tree/master/buck) 上找到文件。

我将电源电压(V1)设为 15v。M1、D1、L1、C1 和 RL 与上次看到的基本降压电路基本相同。不同的是，R2 和 R3 形成了一个分压器，将电压分成两半，并发送给 U2。U2 是一个差分放大器，将电压与 2.5 V 基准电压 V3 进行比较。在实际电路中，你应该选择一个好的基准电压，因为电源的精度不会比基准电压高。

[![](../Images/38b14f8fcb17bf2ece3761dd3e49c505.png)](https://hackaday.com/wp-content/uploads/2018/07/smsp0.png) 显然，你不必有 2.5 V 的基准电压。您可以设置分压比，将任何较高的电压转换为任何较低的参考电压。V2 的输出是三角波，U1 是产生 PWM 驱动信号的比较器(R1 只是一个上拉电阻，根据 U1 的情况，可能不需要)。

我有点作弊，因为我没有用更高的电压驱动栅极，这可能会降低我的效率。在实际系统中，您可能还需要在 M1 的输入端附近放置一个旁路电容，以降低返回电源的噪声，这不是一个大问题。我也没有显示任何 V1，V2，或 V3 的串联电阻，虽然如果你增加一点点，你会发现这并没有真正的区别。

## 表演

如果运行仿真并探测 L1 和 RL 的接合点，您将看到最终输出约 5V 电压，并带有一些纹波。

[![](../Images/fab6a05dd235f76ece7ff34639bd62d7.png)T2】](https://hackaday.com/wp-content/uploads/2018/07/norm.png)

波纹一点也不差，电压在大约 15 毫秒后保持稳定。

我将输入电压改为在三个值之间步进，并在 25 ms 之前停止绘制第一位，以便我们可以专注于工作区域。

输出看起来非常起伏，直到你看左边的比例。

[![](../Images/c343b7ecaff5c0c59d558650fb7e51b7.png)T2】](https://hackaday.com/wp-content/uploads/2018/07/plot.png)

顶部走线采用 10 V 输入，中间走线采用 15 V 输入，底部走线显示 20 V 输入。对于少数几个组件来说，还不算太坏。当然，使用线性通过调节器可以得到更好的结果，但这些调节器会散发大量热量，并且通常具有相当窄的输入电压范围。

还要记住，有更复杂的架构可以针对不同标准进行优化，例如最小化纹波或实现最高效率。该电路非常简单，为深入研究其他类型的开关电源提供了一个良好的起点。

## 真正的三角形

我没有提供详细设计的地方是三角形或斜坡发生器。原因是——正如我在第一篇文章中提到的——在现实生活中，你可能不应该做这些事情。只需从您最喜欢的供应商处购买开关模式电源控制器，并从他们的数据手册中复制设计即可。你将花费数小时构建一个复杂的电路，就像你花一两美元就能在一个 IC 封装中得到的电路一样。尽管如此，您可能希望了解控制器内部发生了什么，即使您不必构建它。

![](../Images/83750e1589204619fc05788f4dd7f0a0.png)

如果你想产生一个三角波，有许多方法可以做到这一点。一个[恒流源](https://hackaday.com/2018/05/03/circuit-vr-sink-or-swim-with-current-sources/)在给电容充电时会产生一条好看的直线。恒流吸电流也可以使电容直线放电。通常，这样的电路会有一个触发器在源和宿之间进行选择。

另一种方法是积分方波。如果你认为积分是曲线下的面积，这是有意义的。面积变大，直到方波变为负值。然后面积以同样的速度减小，直到方波再次变为正值。这里是电路的[在线模拟。](http://tinyurl.com/ybnh6os6)

如果你探测 U1 的输出，你会看到一个漂亮的方波。U2 的输出将是方波的积分。

## 前进

如果你觉得勇敢，你可以尝试用三角波电路的变体来代替斜坡发生器。你还可以尝试许多其他的改变，比如用另一个 FET 代替二极管，并驱动它与第一个 FET 不同相。

不久前[Julian]发布了一个关于硅二极管、肖特基二极管和 FET 之间效率差异的视频。看看模拟和他真实世界的结果是如何吻合的可能会很有趣。

不过，最后有两件事要记住。首先，模拟很棒，但真实世界会有所不同。真实的输入源并不完美。所有组件都表现出您不希望它们表现出的行为。其中一些可以建模(例如输出电容中的 ESR)，但不能全部建模。

另一件要记住的事情是，这确实有助于理解正在发生的事情。当然，你可以用几个晶体管构建一个运算放大器，但是为什么呢？买个运算放大器就行了。这里也一样。我并不是建议您为商业设计开发自己的降压转换器。去买个控制器吧——周围有很多。但是，了解正在发生的事情将有助于您做出更好的设计选择，并且如果您难以让其中一个控制器按照您想要的方式工作，也应该有所帮助。