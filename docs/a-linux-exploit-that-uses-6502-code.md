# 使用 6502 代码的 Linux 漏洞

> 原文：<https://hackaday.com/2016/11/15/a-linux-exploit-that-uses-6502-code/>

随着无处不在的桌面计算已经存在了几十年，任何创建操作系统发行版的人现在都面临向后兼容的问题。每次升级都会带来自己的一套新功能，但它必须保持与以前版本的功能兼容，否则就有疏远用户的风险。如果你是微软产品膨胀的批评者，这是这个特殊问题背后的因素之一。

除了兼容性问题，这种额外的软件开销也带来了安全性问题。例如，一段源自 20 世纪 80 年代 DOS 文字处理器的代码，最初并没有想到有一天它会藏在一台通过互联网对全世界可见的机器的库中。我们今天的主题就是一个很好的例子，一个隐藏在旧代码中的漏洞，其目的是保持一个模糊的向后兼容性。[克里斯·埃文斯]通过播放一个 NES 音乐文件展示了一个 Ubuntu 版本中的漏洞，该文件包含由虚拟 6502 处理器上的播放器模拟的漏洞代码。

[NES 声音格式](https://en.wikipedia.org/wiki/NES_Sound_Format)是一种音乐文件标准，打包任天堂游戏音乐用于播放。它包含一种脚本语言，正是这种语言用于触发漏洞。当您在受影响的 Ubuntu 系统上打开 nsf 文件时，它会通过您的音乐播放器和 gstreamer 多媒体框架找到 libgstnsf.so(一个用于播放 NSF 文件的 gstreamer 插件)的路径。

令人难以置信的是，他的插件通过模仿 NES 中发现的真实 6502 来获得音乐输出，这就是漏洞存在的地方。因此，我们不仅有一层又一层的向后兼容性来播放一种模糊的音乐文件格式，还有 20 世纪 70 年代一些 8 位芯片的软件仿真。[Chris]评论"*这很酷吧？虽然我们同意一个 6502 模拟器被埋在一个现代发行版里很酷，但是我们不禁会想，在这个过程中已经失去了一些东西。*

为 Ubuntu 12.04 提供了概念验证。这是一个旧版本，但他指出，虽然他认为最近的版本不应该包含完全相同的漏洞，但它肯定存在于多个仍然受支持的版本中。由于 Ubuntu 文件管理器的不可预测性，当从 GUI 访问文件夹时，它会自动打开，这也是一个令人担忧的问题。2000 年来了，他们想要回他们的自动打开的 Windows ME 蠕虫。

遗憾的是，我们怀疑这款音乐播放器中的 6502 不能用于更广泛的用途。如果你成功了，请与我们分享！但是，如果你喜欢仿真 6502，看看这个 150MHz 6502 协处理器，它是有人用树莓 Pi 制作的 Acorn BBC Micro 。

[通过 [r/hacking](https://www.reddit.com/r/hacking/comments/5cxleb/compromising_a_linux_desktop_using_6502_processor/)

6502 图片，Dirk Oppelt，(CC BY-SA 3.0) via [维基共享](https://commons.wikimedia.org/wiki/File:MOS_6502AD_4585_top.jpg)。