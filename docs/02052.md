# 基于 ESP8266 的灌溉控制器

> 原文:[https://hack aday . com/2016/04/16/esp8266-based-灌水-控制器/](https://hackaday.com/2016/04/16/esp8266-based-irrigation-controller/)

如果你只是想防止你的花园慢慢变成沙漠，看看现有的现成的家庭自动化解决方案，选择一个，向后靠，让水分监测和自动化灌溉接管。如果你想进入电子领域，学习 PCB 设计并体验随之而来的个人胜利，做[Patrick]所做的，并构建自己的基于 [ESP8266 的灌溉控制器](http://www.dumaisnet.ca/index.php?article=126641f7f62208d409b39fccf4a0f5e4)。也很好玩！

[Patrick]已经有了很强的软件背景，并维护着自己的开源家庭自动化系统，因此构建自己的物理硬件来扩展其功能是合乎逻辑的一步。特别是，[Patrick]想在系统中增加四个无线控制的阀门。

他首先使用 EAGLE 设计完成这项工作的电路。由晶体管和继电器组成的接口电路将帮助 ESP8266 驱动机电阀。因为这些需要 24 V 交流才能打开，所以采用了一个基于 LM2596T 的干净简单的[开关模式电源](https://www.youtube.com/watch?v=CEhBN5_fO5o)电路，将现有的 24 V 交流电源电压转换为 ESP8266 的 3.3 V DC。添加了几个状态指示灯，以便一目了然地检查系统状态。人们可能会在继电器部分浪费一些光耦合器，但对于 ESP8266，为什么要在保护电路上比在 C 上花费更多呢？

![SAMSUNG CAMERA PICTURES](../Images/610eed5106e262ee6dcf4ffff6789286.png)[Patrick]非常狡猾，在开始构建硬件项目时避免了一些常见的陷阱。他知道 EPS8266 启动时 GPIOs 设置为高，所以他在继电器电路中使用 PNP 晶体管，以避免每次设备启动时洒到他的草坪上。此外，他还在电路板上添加了一些可选组件的足迹，以防某些组件无法按预期工作，这最终被证明非常有用。

然后，电路板布局被发送给制造商。组装回收的 PCB 后，[Patrick]注意到编程接头上的 RX/TX 引脚被颠倒，因此需要一个引脚重新颠倒的适配器。此外，ESP-03 上的芯片天线被证明是相当弱的。幸运的是，有一个可选的 U.FL 连接器，所以可以很容易地添加外部天线。

在固件方面，[Patrick]使用他自己的“DWN”协议，该协议允许新设备通知家庭自动化服务器它们的存在和类型。固件还通过将阀门的最大开启时间限制为 30 分钟来防止过水。最终，控制器板进入了一个坚固的外壳，不仅完成了建设，而且原理图，布局和固件已被释放到野外。我们相信你会发现这个记录良好的项目是你下一个家庭自动化项目的一个很好的资源！