# Memcached 服务器被滥用于 DDoS 攻击

> 原文：<https://hackaday.com/2018/03/01/memcached-servers-abused-for-ddos-attacks/>

Cloudflare 最近宣布，他们发现使用 memcached 服务器的[放大攻击有所增加，并且这种利用有可能成为一个大问题，因为 memcached 能够显著放大攻击。这将 DDoS 攻击带到了一个新的水平，但好消息是，问题仅限于几千台配置错误的服务器，解决方案是将服务器置于更严密的防火墙之后，并禁用 UDP。有趣的是，互联网的基本工作是如何被用来创造和引导大量的流量。](https://blog.cloudflare.com/memcrashed-major-amplification-attacks-from-port-11211/)

我们从僵尸网络开始。这是指一群联网设备受到恶意用户的危害和控制。这可能是一套特定品牌的[网络摄像头](https://hackaday.com/2017/05/17/yet-another-iot-botnet/)或[打印机](https://hackaday.com/2017/02/07/printer-vulnerabilites-almost-as-bad-as-iot/)或带有不安全固件的计算机。一旦设备受损，恶意用户就可以控制僵尸网络并让它执行代码。这些代码可以挖掘加密货币，上传敏感数据，或创建大量指向特定服务器的 web 流量，用请求淹没它，并创建分布式拒绝服务(DDoS)攻击来关闭服务器。由于服务器无法区分正常流量和恶意流量，因此无法将其过滤掉，从而变得无响应。

然而，这种 DDoS 攻击受限于僵尸网络的带宽大小。如果僵尸网络中的所有网络摄像头都在以最快的速度冲击服务器，那么僵尸网络已经达到了极限。下一个技巧叫做放大攻击，它利用了 UDP。UDP(与 TCP 相对)就像早期的邮局；你发送邮件，希望它能到达，如果没有，那也没关系。正在通信的计算机之间没有握手。当设备向服务器发送 UDP 数据包时，它会包含返回地址，以便服务器能够发回响应。如果设备用不同的返回地址发送一个精心制作的假请求，那么服务器将把响应发送到那个伪造的返回地址。

因此，如果网络摄像头向服务器 A 发送请求，而服务器 B 收到响应，那么服务器 A 就是在无意中攻击服务器 B。如果请求和响应的大小相同，那么这种攻击就没有任何好处。如果请求小于响应，并且服务器 A 为来自摄像机的每个请求向服务器 B 发送一堆未请求的数据，那么您就有一次成功的放大攻击。在 memcached 的情况下，流量可以放大 5 万倍以上，这意味着一个小僵尸网络可以产生巨大的影响。

Memcached 是一个内存缓存系统，其主要用途是通过缓存数据来帮助大型网站，否则这些数据将存储在数据库或 API 中，因此它确实不应该公开访问。解决方案是关闭 UDP 上面向公众的 memcached，但更大的解决方案是考虑你向互联网提供了什么，以及它们如何被恶意使用。