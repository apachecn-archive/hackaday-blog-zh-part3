# SPI:放手，使用原力

> 原文:[https://hack aday . com/2016/01/02/SPI-let-go-and-use-the-force/](https://hackaday.com/2016/01/02/spi-let-go-and-use-the-force/)

下一次使用 SPI 时，请迈出一步，不要轮询繁忙标志。“什么，你疯了吗？这就是忙旗的全部意义！这是一个快速检查，以确保您不会杀死一个等待移出的字节！”当然，我们也有同样的想法，但硬币的另一面是，检查繁忙标志需要时间，这是他可能正在传输数据的时间。[bigjosh2]计算出，在这种特殊情况下，他的技术节省了 20%的浪费周期。他“使用原力”只是因为他是~~一个绝地大师~~能够依靠一大块汇编代码的循环计数。

他正在使用 AVR 处理器，并输出比特来驱动上图中的老式 LED 显示屏。古老的芯片没有缓冲 SPI，所以他不得不在输入新数据时清空显示屏，以防止出现故障。因为 SPI 传输期间显示空白，所以速度越慢，灯光越暗。

他用同步代码解决了这个问题。硬件 SPI 发送每一位需要 2 个周期，因此他转动拇指(这正是他在代码注释中写的)16 个周期，然后用下一个值重新载入 SPI 寄存器。这就要依靠对硅片的信任，即移位将总是花费相同数量的周期，但硬件的好处是它是确定性的。为了节省时间，他结束了几个周期，没有轮询 busy 标志。

还需要 SPI 实际工作的速成班吗？[Bil Herd]您是否已经了解了[这个 SPI 通信演示](https://hackaday.com/2015/02/24/we-assume-control-spi-and-a-digital-potentiometer/)。